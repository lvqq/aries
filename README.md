[![npm version](https://img.shields.io/npm/v/@tooltik/aries.svg)](https://www.npmjs.com/package/@tooltik/aries) [![npm download count](https://img.shields.io/npm/dt/@tooltik/aries.svg)](https://www.npmjs.com/package/@tooltik/aries) [![license](https://img.shields.io/npm/l/@tooltik/aries.svg)](LICENSE) 

## Aries ♈️
Aries is a swagger converter cli, support typescript declaration, markdown docs, mock server and so on

## Support
- swagger 2.0, json or yaml format
- node >= 12

## Install
```
npm install @tooltik/aries --save-dev

# or

yarn add @tooltik/aries --dev
```

## Usage
```
aries <command> [options]
```

### Command options
```
Commands:
  to-ts [options]    Convert swagger to typescript declaration
  to-md [options]    Convert swagger to markdown docs
  to-mock [options]  Convert swagger to mock json
  mock-server [options]  Start a local server to return the mock interface
```

#### to-ts
```
Options:
  -u, --url <url>       Swagger link to generate, support relative path or remote url
  -o --output <output>  Specify output file path (default: "./swagger.types.ts")
  --no-autoRequired     Do not generate the property as required automatically when there is no required array in definitions
```

#### to-md
```
Options:
  -u, --url <url>       Swagger link to generate, support relative path orremote url
  -o --output <output>  Specify output file path (default: "./swagger.docs.md")
  --no-autoMock         Do not generate the mock samples automatically when there is no example in schema
```

#### to-mock
```
Options:
  -u, --url <url>       Swagger link to generate, support relative path or remote url
  -o --output <output>  Specify output file path (default: "./swagger.mock.json")
  --no-autoMock         Do not generate the mock response automatically when there is no example in schema
```

#### mock-server
```
Options:
  -u, --url <url>       Swagger link, support relative path or remote url
  -p, --port <port>     Mock server port (default: 3000)
  --no-autoMock         Do not generate the mock response automatically when there is no example in schema
```

### .ariesrc.js
Add `.ariesrc.js` in your project root directory. Support all options in command.And the command line has a higher priority than `.ariesrc.js`

#### url
Swagger url, support relative path and remote url

#### output
Output file path

#### autoMock
Default we use example to generate mock data. Use `autoMock` to determine whether mock automatically when there is no example in schema, default is `True`. Affects `to-md/to-mock/mock-server`

#### formatMock 
Format the mock response.The parameter is origin mock data generated by example or autoMock. It affects the samples in `to-md` and the response in `to-mock/mock-server`

#### autoRequired
Determine whether the property is required when there is no required in schema, default is `True`

#### formatProp
Format the property in typescript declaration.The parameter is the property name

#### port
Change the port in mock-server, default is 3000

e.g.

```
// .ariesrc.js
module.exports = {
  url: './test/swagger.json',
  autoMock: true,
  autoRequired: true,
  formatMock: (data) => {
    return {
      code: 0,
      msg: 'success',
      data,
    }
  },
  formatProp: (prop) => {
    // Add prop format
    return prop
  }
}
```

## LICENSE
MIT